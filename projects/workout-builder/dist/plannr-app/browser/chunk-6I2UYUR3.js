import{a as L,b as Q,c as U,d as X,e as Y}from"./chunk-3W42FSIL.js";import{a as k}from"./chunk-EE6GGRKG.js";import{b as j}from"./chunk-CBDB6PPI.js";import{a as G}from"./chunk-E2KADIVF.js";import{b as P,d as O,e as V,f as q,g as h,i as A,k as z,l as H,q as J,s as _,u as K}from"./chunk-7M27L2PM.js";import{$ as I,$a as v,D as i,G as M,J as d,O as D,Sa as g,U as N,V as F,W as s,Za as B,aa as E,ba as R,ca as l,da as m,ea as C,f as S,g as T,ha as u,k as y,p as x,q as W,qa as p,r as c,ra as $,sa as w,ya as f}from"./chunk-IYJWUTWN.js";var Z=t=>{let e=t.paramMap.get("id");if(!e)throw Error("No id provided in route.");return i(k).getWorkout$(e)};var ee=()=>{let t=i(k),e=i(G);return t.getWorkouts().pipe(y(()=>(e.open({type:"error",message:"Failed to load workouts"}),S([]))))};var oe=(()=>{let e=class e extends Y{constructor(){super(...arguments),this.workoutsService=i(k),this.loading=D(!1),this.form=new q({name:new h("",{validators:[P.required],nonNullable:!0}),description:new h("",{nonNullable:!1}),tags:new h([],{nonNullable:!0})})}create(){if(this.form.invalid)throw Error("Invalid exercise form");this.loading.set(!0);let r=this.form.value;this.workoutsService.createWorkout$(r).subscribe({next:o=>{this.form.reset(),this.close(o)},error:()=>{},complete:()=>{this.loading.set(!1)}})}};e.\u0275fac=(()=>{let r;return function(n){return(r||(r=M(e)))(n||e)}})(),e.\u0275cmp=c({type:e,selectors:[["app-new-workout-modal"]],standalone:!0,features:[N,f],decls:9,vars:3,consts:[[1,"w-[80vw]","md:w-96",3,"formGroup"],["name","name","formControlName","name","label","Name",1,"mb-3"],["type","textarea","name","description","formControlName","description","label","Description",1,"mb-3"],["formControlName","tags",1,"mb-6"],[1,"flex","justify-end","gap-4","w-100","mx-auto"],["color","secondary",3,"click"],[3,"disabled","loading","click"]],template:function(o,n){o&1&&(l(0,"form",0),C(1,"app-input",1)(2,"app-input",2)(3,"app-tag-input",3),l(4,"div",4)(5,"app-button",5),u("click",function(){return n.close()}),p(6,"Cancel"),m(),l(7,"app-button",6),u("click",function(){return n.create()}),p(8,"Create"),m()()()),o&2&&(s("formGroup",n.form),d(7),s("disabled",n.form.invalid)("loading",n.loading()))},dependencies:[g,K,J,A,O,V,z,H,_,X],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});let t=e;return t})();function ae(t,e){if(t&1&&p(0),t&2){let a=e.$implicit;w(" ",a.name," ")}}function pe(t,e){if(t&1&&p(0),t&2){let a=e.$implicit;w(" ",a.description," ")}}function le(t,e){if(t&1&&(l(0,"span",5),p(1),m()),t&2){let a=e.$implicit;d(),$(a)}}function me(t,e){if(t&1&&E(0,le,2,1,"span",6,I),t&2){let a=e.$implicit;R(a.tags)}}function se(t,e){if(t&1&&p(0),t&2){let a=e.$implicit;w(" ",a.sets==null?null:a.sets.length," ")}}var re=(()=>{let e=class e{constructor(){this.router=i(v),this.data=x()}goToWorkout(r){this.router.navigate(["workouts",r])}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=c({type:e,selectors:[["app-workouts-table"]],inputs:{data:[W.SignalBased,"data"]},standalone:!0,features:[f],decls:5,vars:1,consts:[[3,"data","rowClick"],["appTableColumn","","headerDef","Name"],["appTableColumn","","headerDef","Description"],["appTableColumn","","headerDef","Tags"],["appTableColumn","","headerDef","Sets"],[1,"px-2","py-0.5","bg-slate-300","rounded-lg"],["class","px-2 py-0.5 bg-slate-300 rounded-lg"]],template:function(o,n){o&1&&(l(0,"app-table",0),u("rowClick",function(ie){return n.goToWorkout(ie.row.id)}),F(1,ae,1,1,"ng-template",1)(2,pe,1,1,"ng-template",2)(3,me,2,0,"ng-template",3)(4,se,1,1,"ng-template",4),m()),o&2&&s("data",n.data())},dependencies:[g,U,Q],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});let t=e;return t})();var ne=(()=>{let e=class e{constructor(){this.route=i(B),this.modalsService=i(L),this.router=i(v),this.workouts=j(this.route.data.pipe(T(r=>r.workouts)))}openNewWorkoutModal(){this.modalsService.newModal(oe,{title:"Create new workout"}).closed$.subscribe({next:o=>{o&&this.router.navigate([`/workouts/${o.id}`])}})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=c({type:e,selectors:[["app-workouts-page"]],standalone:!0,features:[f],decls:4,vars:1,consts:[[1,"p-2","flex","flex-col","gap-2"],["shape","circle",1,"self-end",3,"click"],[3,"data"]],template:function(o,n){o&1&&(l(0,"main",0)(1,"app-button",1),u("click",function(){return n.openNewWorkoutModal()}),p(2,"+"),m(),C(3,"app-workouts-table",2),m()),o&2&&(d(3),s("data",n.workouts()))},dependencies:[g,_,re],encapsulation:2,changeDetection:0});let t=e;return t})();var ot=[{component:ne,path:"",resolve:{workouts:ee}},{loadComponent:()=>import("./chunk-COKXLA5A.js").then(t=>t.WorkoutBuilderPageComponent),path:":id",resolve:{workout:Z}}];export{ot as workoutsRoutes};
